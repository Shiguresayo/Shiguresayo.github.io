<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚¹ãƒ­ãƒƒãƒˆé¢¨ãƒªãƒ¼ãƒ«ï¼ˆé †åœæ­¢ï¼‰</title>
<style>
  .reel-container { display:flex; justify-content:center; gap:10px; margin:50px;}
  .reel-wrapper { width:100px; height:100px; overflow:hidden; border:2px solid #333; border-radius:8px;}
  .reel-inner { display:flex; flex-direction:column; }
  .reel-inner img { width:100px; height:100px; }
  #startBtn { display:block; margin:20px auto; padding:10px 20px; font-size:16px; }
  #result { text-align:center; font-size:24px; margin-top:20px; font-weight:bold; }
  #links { text-align:center; margin-top:30px; font-size:18px; }
</style>
</head>
<body>

<div class="reel-container">
  <div class="reel-wrapper"><div class="reel-inner"><img src="pamo1.jpg"><img src="pamo2.jpg"><img src="pamo3.jpg"></div></div>
  <div class="reel-wrapper"><div class="reel-inner"><img src="pamo1.jpg"><img src="pamo2.jpg"><img src="pamo3.jpg"></div></div>
  <div class="reel-wrapper"><div class="reel-inner"><img src="pamo1.jpg"><img src="pamo2.jpg"><img src="pamo3.jpg"></div></div>
</div>

<button id="startBtn">ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
<div id="result" style="min-height:40px;"></div>

<!-- ãƒªãƒ³ã‚¯é›† -->
<div id="links">
  <a href="https://example.com" target="_blank">ãƒªãƒ³ã‚¯é›†ã«æˆ»ã‚‹</a>
</div>

<script>
const images = ["pamo1.jpg","pamo2.jpg","pamo3.jpg"];
const reelInners = document.querySelectorAll(".reel-inner");
const btn = document.getElementById("startBtn");
const resultDiv = document.getElementById("result");

let positions = [0,0,0]; // pxå˜ä½ã®ç¾åœ¨ä½ç½®

btn.addEventListener("click", () => {
    btn.disabled = true;
    resultDiv.textContent = "";

    const speed = 25; // é«˜é€Ÿå›è»¢(px/frame)
    const spinFrames = 50; // å›è»¢ãƒ•ãƒ¬ãƒ¼ãƒ æ•°
    const stopDelays = [0, 10, 20]; // å·¦â†’å³é †ã«æ­¢ã¾ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ å·®
    let frame = 0;
    let stopped = [false, false, false]; // å„ãƒªãƒ¼ãƒ«ã®åœæ­¢ãƒ•ãƒ©ã‚°

    function animate() {
        reelInners.forEach((inner, i) => {
            if(!stopped[i]){
                positions[i] += speed;
                positions[i] %= images.length*100; // ãƒ«ãƒ¼ãƒ—
                inner.style.transform = `translateY(-${Math.floor(positions[i])}px)`;
            }
        });

        frame++;

        // ãƒªãƒ¼ãƒ«é †ã«åœæ­¢åˆ¤å®š
        reelInners.forEach((inner, i) => {
            if(!stopped[i] && frame >= spinFrames + stopDelays[i]){
                const finalIndex = Math.floor(Math.random()*images.length);
                positions[i] = finalIndex*100;
                inner.style.transform = `translateY(-${positions[i]}px)`;
                stopped[i] = true;
            }
        });

        if(stopped.every(v => v)){
            // å…¨ãƒªãƒ¼ãƒ«åœæ­¢ â†’ å½“ãŸã‚Šåˆ¤å®š
            const first = positions[0]/100;
            const allSame = positions.every(p => p/100 === first);
            resultDiv.textContent = allSame ? "å½“ãŸã‚Šï¼ğŸ‰" : "ã¯ãšã‚Œ";
            btn.disabled = false;
        } else {
            requestAnimationFrame(animate);
        }
    }

    animate();
});
</script>

</body>
</html>
