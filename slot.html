<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>„Éë„É¢„Çπ„É≠„ÉÉ„Éà</title>
<style>
  .reel-container {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 50px;
  }
  .reel-wrapper {
    width: 100px;
    height: 100px;
    overflow: hidden;
    border: 2px solid #333;
    border-radius: 8px;
  }
  .reel-inner {
    display: flex;
    flex-direction: column;
  }
  .reel-inner img {
    width: 100px;
    height: 100px;
  }
  #startBtn {
    display: block;
    margin: 20px auto;
    padding: 10px 20px;
    font-size: 16px;
  }
  #result {
    text-align: center;
    font-size: 24px;
    margin-top: 20px;
    font-weight: bold;
  }
</style>
</head>
<body>

<div class="reel-container">
  <div class="reel-wrapper">
    <div class="reel-inner">
      <img src="pamo1.jpg" alt="">
      <img src="pamo2.jpg" alt="">
      <img src="pamo3.jpg" alt="">
    </div>
  </div>
  <div class="reel-wrapper">
    <div class="reel-inner">
      <img src="pamo1.jpg" alt="">
      <img src="pamo2.jpg" alt="">
      <img src="pamo3.jpg" alt="">
    </div>
  </div>
  <div class="reel-wrapper">
    <div class="reel-inner">
      <img src="pamo1.jpg" alt="">
      <img src="pamo2.jpg" alt="">
      <img src="pamo3.jpg" alt="">
    </div>
  </div>
</div>

<button id="startBtn">„Çπ„Çø„Éº„Éà</button>
<div id="result"></div>

<script>
const images = ["pamo1.jpg", "pamo2.jpg", "pamo3.jpg"];
const reelWrappers = document.querySelectorAll(".reel-wrapper");
const reelInners = document.querySelectorAll(".reel-inner");
const btn = document.getElementById("startBtn");
const resultDiv = document.getElementById("result");

// ÂâçÂõû„ÅÆ‰ΩçÁΩÆ‰øùÊåÅ
let currentIndices = [0,0,0];

btn.addEventListener("click", () => {
    btn.disabled = true;
    resultDiv.textContent = "";

    const interval = 50; // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÈñìÈöî
    const totalSpins = 20; // ÂõûËª¢ÂõûÊï∞
    const stopDelays = [0, 5, 10];
    let count = 0;

    const reelInterval = setInterval(() => {
        reelInners.forEach((inner, i) => {
            if(count < totalSpins + stopDelays[i]){
                currentIndices[i] = (currentIndices[i]+1)%images.length;
                inner.style.transform = `translateY(-${currentIndices[i]*100}px)`;
            }
        });

        count++;
        if(count >= totalSpins + stopDelays[reelInners.length-1]){
            clearInterval(reelInterval);
            // Ê∏õÈÄüÂÅúÊ≠¢ÊºîÂá∫
            reelInners.forEach((inner, i) => slowStop(inner, i));
        }
    }, interval);

    function slowStop(inner, reelIndex){
        let delay = 50;
        const steps = 5;
        let step = 0;

        function stepRotation(){
            if(step < steps){
                currentIndices[reelIndex] = (currentIndices[reelIndex]+1)%images.length;
                inner.style.transform = `translateY(-${currentIndices[reelIndex]*100}px)`;
                delay += 50;
                step++;
                setTimeout(stepRotation, delay);
            } else {
                // ÊúÄÂæå„Å´Ê≠¢„ÇÅ„ÇãÁîªÂÉè„Çí„É©„É≥„ÉÄ„É†
                const finalIndex = Math.floor(Math.random()*images.length);
                currentIndices[reelIndex] = finalIndex;
                inner.style.transform = `translateY(-${finalIndex*100}px)`;

                // ÂÖ®„É™„Éº„É´ÂÅúÊ≠¢Âæå„Å´ÂΩì„Åü„ÇäÂà§ÂÆö
                if(reelIndex === reelInners.length-1){
                    const first = currentIndices[0];
                    const allSame = currentIndices.every(idx => idx === first);
                    resultDiv.textContent = allSame ? "ÂΩì„Åü„ÇäÔºÅüéâ" : "„ÅØ„Åö„Çå‚Ä¶üò¢";
                    btn.disabled = false;
                }
            }
        }
        setTimeout(stepRotation, reelIndex*200);
    }
});
</script>

</body>
</html>
